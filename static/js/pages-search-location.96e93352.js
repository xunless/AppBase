(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-search-location"],{"131d5":function(t,e,i){"use strict";(function(t){var n=i("4ea4");i("99af"),i("b680"),i("4d63"),i("ac1f"),i("25f0"),i("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("5ace")),o=weex.requireModule("mapSearch"),s={filters:{mTKmFilter:function(t){return t<500?t+"m":(t/1e3).toFixed(2)+"Km"},replaceFilter:function(t){var e=new RegExp("\\\\","gi");return t.replace(e,"")}},data:function(){return{searchContent:"",dataList:[],addressInfo:null,pageIndex:1,status:"more"}},onLoad:function(){this.getLocation()},onPullDownRefresh:function(){this.pageIndex=1,this.searchhandle(),setTimeout((function(){uni.stopPullDownRefresh()}),2e3)},onReachBottom:function(){"noMore"!=this.status&&(this.pageIndex++,this.searchhandle())},methods:{searchhandle:function(e){t.log(o);var i=this;if(this.addressInfo){if(!i.searchContent)return this.toast("请输入搜索内容"),void uni.stopPullDownRefresh();e&&(i.pageIndex=e),this.status="loading",o.poiSearchNearBy({point:{latitude:i.addressInfo.latitude,longitude:i.addressInfo.longitude},key:i.searchContent,radius:1e5,index:i.pageIndex},(function(e){t.log(e),1==i.pageIndex?i.dataList=e.poiList:i.dataList=i.dataList.concat(e.poiList),i.dataList.length==e.pageNumber?i.status="noMore":i.status="more"}))}else i.toast("无当前定位信息"),uni.stopPullDownRefresh()},getLocation:function(){var e=this;uni.showLoading({title:"定位中...",mask:!0}),uni.getLocation({type:"gcj02",geocode:!0,success:function(i){t.log(i),e.addressInfo=i,t.log("当前位置的经度："+i.longitude),t.log("当前位置的纬度："+i.latitude),uni.hideLoading()},fail:function(e){t.log("定位报错>>>",e),uni.hideLoading(),uni.getNetworkType({success:function(e){t.log(e),"none"==e.networkType?uni.showModal({title:"提示",content:"当前无网络,请检查网络连接",confirmText:"确定",showCancel:!1,success:function(e){e.confirm&&(t.log("开启离线模式"),a.default.gotoAppSetting())}}):uni.showModal({title:"温馨提示",content:"应用获取定位失败，请检查网络或设置",confirmText:"打开设置",success:function(t){t.confirm&&a.default.gotoAppSetting()}})}})}})}}};e.default=s}).call(this,i("5a52")["default"])},"180f":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */uni-page-body[data-v-67812aa8],\r\nuni-view[data-v-67812aa8],\r\nuni-text[data-v-67812aa8],\r\nuni-image[data-v-67812aa8],\r\nuni-scroll-view[data-v-67812aa8],\r\nuni-swiper[data-v-67812aa8],\r\nuni-swiper-item[data-v-67812aa8]{\r\nbox-sizing:border-box\n}.btn[data-v-67812aa8]{width:100%;height:%?98?%;text-align:center;font-family:PingFang SC;font-weight:400;border-radius:%?49?%;color:#fff;line-height:%?98?%;background-color:#333;font-size:%?32?%;box-sizing:border-box}\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.content[data-v-67812aa8]{position:relative;width:100%;padding:%?42?% 0 0 %?24?%;box-sizing:border-box;padding-top:%?109?%}.content .search[data-v-67812aa8]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:fixed;top:0;right:0;left:0;top:44px;width:100%;padding:%?19?% %?34?% %?12?% %?20?%;background:#fff;z-index:10}.content .search .search_location[data-v-67812aa8]{width:%?120?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content .search .search_location uni-image[data-v-67812aa8]{-webkit-flex-shrink:0;flex-shrink:0;width:%?33?%;height:%?33?%}.content .search .search_location uni-text[data-v-67812aa8]{-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:break-all;font-size:%?28?%;font-family:PingFang SC;font-weight:500;line-height:%?40?%;color:#333;opacity:1}.content .search .search_box[data-v-67812aa8]{-webkit-flex-shrink:0;flex-shrink:0;width:%?489?%;height:%?78?%;background:#f6f6f6;opacity:1;border-radius:%?49?%;padding:0 %?18?% 0 %?23?%;margin:0 %?17?%;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content .search .search_box uni-input[data-v-67812aa8]{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:100%;padding:0 %?19?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?28?%;font-family:PingFang SC;font-weight:400;line-height:%?46?%;color:#333;opacity:1}.content .search .search_box uni-image[data-v-67812aa8]{-webkit-flex-shrink:0;flex-shrink:0;width:%?32?%;height:%?32?%}.content .search uni-text[data-v-67812aa8]{-webkit-flex-shrink:0;flex-shrink:0;font-size:%?28?%;font-family:PingFang SC;font-weight:400;line-height:%?40?%;color:#333;opacity:1}.content .list[data-v-67812aa8]{width:100%;overflow-x:hidden}.content .list .list_item[data-v-67812aa8]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100%;padding:%?23?% %?24?% %?25?% 0;box-sizing:border-box;border-bottom:%?1?% solid #e8e8e8}.content .list .list_item uni-text[data-v-67812aa8]{-webkit-flex-shrink:0;flex-shrink:0;font-size:%?26?%;font-family:PingFang SC;font-weight:400;line-height:%?46?%;color:#999;opacity:1}.content .list .list_item .list_item_right[data-v-67812aa8]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column;flex-flow:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;padding-right:%?5?%}.content .list .list_item .list_item_right uni-text[data-v-67812aa8]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;font-size:%?28?%;font-family:PingFang SC;font-weight:400;line-height:%?46?%;color:#333;opacity:1}.content .list .list_item .list_item_right uni-text[data-v-67812aa8]:last-child{font-size:%?26?%;color:#666}',""]),t.exports=e},5277:function(t,e,i){"use strict";var n=i("f439"),a=i.n(n);a.a},"5ace":function(t,e,i){(function(e){var n;function a(){var t=0,e=plus.ios.import("PHPhotoLibrary"),i=e.authorizationStatus();return t=0===i?null:3==i?1:0,plus.ios.deleteObject(e),t}function o(){var t=0,e=plus.ios.import("AVCaptureDevice"),i=e.authorizationStatusForMediaType("vide");return t=0===i?null:3==i?1:0,plus.ios.deleteObject(e),t}function s(){var t=0,e=plus.ios.import("CLLocationManager"),i=e.locationServicesEnabled(),n=e.authorizationStatus();return t=i?0===n?null:3===n||4===n?1:0:2,plus.ios.deleteObject(e),t}function r(){var t=0,i=plus.ios.import("UIApplication"),n=i.sharedApplication(),a=0;if(n.currentUserNotificationSettings){var o=n.currentUserNotificationSettings();a=o.plusGetAttribute("types"),0==a?(t=0,e.log("推送权限没有开启")):(t=1,e.log("已经开启推送功能!")),plus.ios.deleteObject(o)}else a=n.enabledRemoteNotificationTypes(),0==a?(t=3,e.log("推送权限没有开启!")):(t=4,e.log("已经开启推送功能!"));return plus.ios.deleteObject(n),plus.ios.deleteObject(i),t}function l(){var t=0,e=plus.ios.import("CNContactStore"),i=e.authorizationStatusForEntityType(0);return t=0===i?null:3==i?1:0,plus.ios.deleteObject(e),t}function c(){var t=null,i=plus.ios.import("AVAudioSession"),n=i.sharedInstance(),a=n.recordPermission();return e.log("permissionStatus:"+a),t=1970168948===a?null:1735552628===a?1:0,plus.ios.deleteObject(i),t}function u(){var t=null,i=plus.ios.import("EKEventStore"),n=i.authorizationStatusForEntityType(0);return 3==n?(t=1,e.log("日历权限已经开启")):e.log("日历权限没有开启"),plus.ios.deleteObject(i),t}function d(){var t=null,i=plus.ios.import("EKEventStore"),n=i.authorizationStatusForEntityType(1);return 3==n?(t=1,e.log("备忘录权限已经开启")):e.log("备忘录权限没有开启"),plus.ios.deleteObject(i),t}function f(t){return new Promise((function(e,i){switch(t){case"push":e(r());break;case"location":e(s());break;case"record":e(c());break;case"camera":e(o());break;case"album":e(a());break;case"contact":e(l());break;case"calendar":e(u());break;case"memo":e(d());break;default:e(0);break}}))}function p(t){return new Promise((function(i,n){plus.android.requestPermissions([t],(function(t){for(var n=0,a=0;a<t.granted.length;a++){var o=t.granted[a];e.log("已获取的权限："+o),n=1}for(a=0;a<t.deniedPresent.length;a++){var s=t.deniedPresent[a];e.log("拒绝本次申请的权限："+s),n=0}for(a=0;a<t.deniedAlways.length;a++){var r=t.deniedAlways[a];e.log("永久拒绝申请的权限："+r),n=-1}i(n)}),(function(t){e.log("result error: "+t.message),i({code:t.code,message:t.message})}))}))}function g(){if(b.isIOS){var t=plus.ios.import("UIApplication"),e=t.sharedApplication(),i=plus.ios.import("NSURL"),n=i.URLWithString("app-settings:");e.openURL(n),plus.ios.deleteObject(n),plus.ios.deleteObject(i),plus.ios.deleteObject(e)}else{var a=plus.android.importClass("android.content.Intent"),o=plus.android.importClass("android.provider.Settings"),s=plus.android.importClass("android.net.Uri"),r=plus.android.runtimeMainActivity(),l=new a;l.setAction(o.ACTION_APPLICATION_DETAILS_SETTINGS);var c=s.fromParts("package",r.getPackageName(),null);l.setData(c),r.startActivity(l)}}i("d3b7");var b={get isIOS(){return"boolean"===typeof n?n:n="ios"===uni.getSystemInfoSync().platform},requestIOS:f,requestAndroid:p,gotoAppSetting:g};t.exports=b}).call(this,i("5a52")["default"])},"675f":function(t,e,i){"use strict";i.r(e);var n=i("8e2a"),a=i("d3bc");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("5277");var s,r=i("f0c5"),l=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"67812aa8",null,!1,n["a"],s);e["default"]=l.exports},"8e2a":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"search"},[i("v-uni-view",{staticClass:"search_location"},[i("v-uni-image",{attrs:{src:"/static/img/search/location.png",mode:""}}),t.addressInfo?i("v-uni-text",[t._v(t._s(t.addressInfo.address.city))]):t._e()],1),i("v-uni-view",{staticClass:"search_box"},[i("v-uni-image",{attrs:{src:"/static/img/search/search.png",mode:""}}),i("v-uni-input",{attrs:{type:"text",placeholder:"请输入地址","confirm-type":"search","placeholder-style":"color: #999999;"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.searchhandle(1)}},model:{value:t.searchContent,callback:function(e){t.searchContent=e},expression:"searchContent"}}),i("v-uni-image",{attrs:{src:"/static/img/search/close.png"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.searchContent="",t.dataList=[]}}})],1),i("v-uni-text",{on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.searchhandle(1)}}},[t._v("搜索")])],1),i("v-uni-view",{staticClass:"list"},[t._l(t.dataList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"list_item",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.chagneCheck(e)}}},[i("v-uni-view",{staticClass:"list_item_right"},[i("v-uni-text",[t._v(t._s(t._f("replaceFilter")(e.name)))]),i("v-uni-text",[t._v(t._s(t._f("replaceFilter")(e.address)))])],1),i("v-uni-text",[t._v(t._s(t._f("mTKmFilter")(e.distance)))])],1)})),i("uni-load-more",{attrs:{status:t.status}})],2)],1)},o=[]},d3bc:function(t,e,i){"use strict";i.r(e);var n=i("131d5"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},f439:function(t,e,i){var n=i("180f");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("34cc0f16",n,!0,{sourceMap:!1,shadowMode:!1})}}]);